Tables for the DL Nuclear Segmentation Manuscript
================
Jun 15 2020

Load the required libraries

``` r
library(tidyverse)
```

    ## ── Attaching packages ───────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.1     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.1     ✓ dplyr   1.0.0
    ## ✓ tidyr   1.1.0     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ──────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readr)
library(knitr)
library(kableExtra)
```

    ## 
    ## Attaching package: 'kableExtra'

    ## The following object is masked from 'package:dplyr':
    ## 
    ##     group_rows

Set `knitr` options.

``` r
knitr::opts_chunk$set(
    cache = FALSE,
    fig.path = "Output/",
    dev = c("png", "pdf"),
    message = FALSE,
    warning = FALSE
    )
```

Read the `.csv` tables generated by the `DL_Nuc_Seg_Results.Rmd`
analysis script.

``` r
table_1 <- read_csv("Output/Table1.csv")
table_2 <- read_csv("Output/Table2.csv")
table_S1 <- read_csv("Output/TableS1.csv")
```

Rearrange the Table 1 to have cell lines and F1 thresholds as columns
and models and GT labels annotation strategies as rows.

``` r
table_1_reformat <- table_1 %>%
    rename(`MRCNN_0.7` = `MRCNN-0.7`,
           `MRCNN_0.9` = `MRCNN-0.9`,
           `FPN2-WS_0.7` = `FPN2-WS-0.7`,
           `FPN2-WS_0.9` = `FPN2-WS-0.9`) %>%
    pivot_longer(cols = -`Cell Line`,
                 names_sep = "_",
                 names_to = c("Model", "Threshold"),
                 values_to = "F1 Score") %>%
    pivot_wider(names_from = c(`Cell Line`, `Threshold`),
                values_from = `F1 Score`,
                names_sep = "/") %>%
    arrange(Model)
```

Same as above, but for Table 2.

``` r
table_2_reformat <- table_2 %>%
    rename(`MRCNN_0.7` = `MRCNN-0.7`,
           `MRCNN_0.9` = `MRCNN-0.9`,
           `FPN2-WS_0.7` = `FPN2-WS-0.7`,
           `FPN2-WS_0.9` = `FPN2-WS-0.9`,
           Jacobkie_0.7 = `Jacobkie-0.7`,
           Jacobkie_0.9 = `Jacobkie-0.9`,
           ) %>%
    pivot_longer(cols = -`Cell Line`,
                 names_sep = "_",
                 names_to = c("Model", "Threshold"),
                 values_to = "F1 Score") %>%
    pivot_wider(names_from = c(`Cell Line`, `Threshold`),
                values_from = `F1 Score`,
                names_sep = "/")
```

Same as above, but for Table S1.

``` r
table_S1_reformat <- table_S1 %>%
    rename(`MRCNN/Manual_0.7` = `MRCNN-Manual-0.7`,
           `MRCNN/SemiAutomated_0.7` = `MRCNN-Semi-Automated-0.7`,
           `MRCNN/Manual_0.9` = `MRCNN-Manual-0.9`,
           `MRCNN/SemiAutomated_0.9` = `MRCNN-Semi-Automated-0.9`,
           `FPN2-WS/Manual_0.7` = `FPN2-WS-Manual-0.7`,
           `FPN2-WS/SemiAutomated_0.7` = `FPN2-WS-Semi-Automated-0.7`,
           `FPN2-WS/Manual_0.9` = `FPN2-WS-Manual-0.9`,
           `FPN2-WS/SemiAutomated_0.9` = `FPN2-WS-Semi-Automated-0.9`,
           `Jacobkie/Manual_0.7` = `Jacobkie-Manual-0.7`,
           `Jacobkie/SemiAutomated_0.7` = `Jacobkie-Semi-Automated-0.7`,
           `Jacobkie/Manual_0.9` = `Jacobkie-Manual-0.9`,
           `Jacobkie/SemiAutomated_0.9` = `Jacobkie-Semi-Automated-0.9`,
           ) %>%
    pivot_longer(cols = -`Cell Line`,
                 names_sep = "_",
                 names_to = c("Model", "Threshold"),
                 values_to = "F1 Score") %>%
    separate(col = Model,
             into = c("Model", "GT Annotation"),
             sep = "/") %>%
    pivot_wider(names_from = c(`Cell Line`, `Threshold`),
                values_from = `F1 Score`,
                names_sep = "/")
```

Generate Table 1. The table is saved as a .pdf file.

``` r
table_1_reformat %>%
    # This part is to label in bold the maximum values for any
    # combination of cell line and threshold
    mutate(`MCF10A/0.7` = cell_spec(round(`MCF10A/0.7`, 2), 
                                    "latex", 
                                     bold = `MCF10A/0.7` == max(`MCF10A/0.7`)),
           `MCF10A/0.9` = cell_spec(round(`MCF10A/0.9`, 2), 
                                    "latex", 
                                     bold = `MCF10A/0.9` == max(`MCF10A/0.9`)),
           `U2OS/0.7` = cell_spec(round(`U2OS/0.7`, 2), 
                                    "latex", 
                                     bold = `U2OS/0.7` == max(`U2OS/0.7`)),
           `U2OS/0.9` = cell_spec(round(`U2OS/0.9`, 2), 
                                    "latex", 
                                     bold = `U2OS/0.9` == max(`U2OS/0.9`)),
           `HCT116/0.7` = cell_spec(round(`HCT116/0.7`, 2), 
                                    "latex", 
                                     bold = `HCT116/0.7` == max(`HCT116/0.7`)),
           `HCT116/0.9` = cell_spec(round(`HCT116/0.9`, 2), 
                                    "latex", 
                                     bold = `HCT116/0.9` == max(`HCT116/0.9`)),
           `Eosinophils/0.7` = cell_spec(round(`Eosinophils/0.7`, 2), 
                                    "latex", 
                                     bold = `Eosinophils/0.7` == max(`Eosinophils/0.7`)),
           `Eosinophils/0.9` = cell_spec(round(`Eosinophils/0.9`, 2), 
                                    "latex", 
                                     bold = `Eosinophils/0.9` == max(`Eosinophils/0.9`))
           ) %>%
kable(format = "latex",
      escape = F,
      booktabs = T,
      align = "c") %>%
   kable_styling(latex_options = "scale_down") %>%
   landscape() %>%
   save_kable("Output/Table_1.pdf")
```

Same, but for Table 2.

``` r
table_2_reformat %>%
    mutate(`MCF10A/0.7` = cell_spec(round(`MCF10A/0.7`, 2), 
                                    "latex", 
                                     bold = `MCF10A/0.7` == max(`MCF10A/0.7`)),
           `MCF10A/0.9` = cell_spec(round(`MCF10A/0.9`, 2), 
                                    "latex", 
                                     bold = `MCF10A/0.9` == max(`MCF10A/0.9`)),
           `U2OS/0.7` = cell_spec(round(`U2OS/0.7`, 2), 
                                    "latex", 
                                     bold = `U2OS/0.7` == max(`U2OS/0.7`)),
           `U2OS/0.9` = cell_spec(round(`U2OS/0.9`, 2), 
                                    "latex", 
                                     bold = `U2OS/0.9` == max(`U2OS/0.9`)),
           `HCT116/0.7` = cell_spec(round(`HCT116/0.7`, 2), 
                                    "latex", 
                                     bold = `HCT116/0.7` == max(`HCT116/0.7`)),
           `HCT116/0.9` = cell_spec(round(`HCT116/0.9`, 2), 
                                    "latex", 
                                     bold = `HCT116/0.9` == max(`HCT116/0.9`)),
           `Eosinophils/0.7` = cell_spec(round(`Eosinophils/0.7`, 2), 
                                    "latex", 
                                     bold = `Eosinophils/0.7` == max(`Eosinophils/0.7`)),
           `Eosinophils/0.9` = cell_spec(round(`Eosinophils/0.9`, 2), 
                                    "latex", 
                                     bold = `Eosinophils/0.9` == max(`Eosinophils/0.9`))
           ) %>%
kable(format = "latex",
      escape = F,
      booktabs = T,
      align = "c") %>%
   kable_styling(latex_options = "scale_down") %>%
   landscape() %>% 
   save_kable("Output/Table_2.pdf")
```

Same but for Table S1.

``` r
table_S1_reformat %>%
    mutate(`MCF10A/0.7` = cell_spec(round(`MCF10A/0.7`, 2), 
                                    "latex", 
                                     bold = `MCF10A/0.7` == max(`MCF10A/0.7`)),
           `MCF10A/0.9` = cell_spec(round(`MCF10A/0.9`, 2), 
                                    "latex", 
                                     bold = `MCF10A/0.9` == max(`MCF10A/0.9`)),
           `U2OS/0.7` = cell_spec(round(`U2OS/0.7`, 2), 
                                    "latex", 
                                     bold = `U2OS/0.7` == max(`U2OS/0.7`)),
           `U2OS/0.9` = cell_spec(round(`U2OS/0.9`, 2), 
                                    "latex", 
                                     bold = `U2OS/0.9` == max(`U2OS/0.9`)),
           `HCT116/0.7` = cell_spec(round(`HCT116/0.7`, 2), 
                                    "latex", 
                                     bold = `HCT116/0.7` == max(`HCT116/0.7`)),
           `HCT116/0.9` = cell_spec(round(`HCT116/0.9`, 2), 
                                    "latex", 
                                     bold = `HCT116/0.9` == max(`HCT116/0.9`)),
           `Eosinophils/0.7` = cell_spec(round(`Eosinophils/0.7`, 2), 
                                    "latex", 
                                     bold = `Eosinophils/0.7` == max(`Eosinophils/0.7`)),
           `Eosinophils/0.9` = cell_spec(round(`Eosinophils/0.9`, 2), 
                                    "latex", 
                                     bold = `Eosinophils/0.9` == max(`Eosinophils/0.9`))
           ) %>%
kable(format = "latex",
      escape = F,
      booktabs = T,
      align = "c") %>%
   kable_styling(latex_options = "scale_down") %>%
   landscape() %>%
   save_kable("Output/Table_S1.pdf")
```

``` r
sessionInfo()
```

    ## R version 3.6.3 (2020-02-29)
    ## Platform: x86_64-apple-darwin15.6.0 (64-bit)
    ## Running under: macOS Mojave 10.14.6
    ## 
    ## Matrix products: default
    ## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
    ## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
    ## 
    ## locale:
    ## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
    ## 
    ## attached base packages:
    ## [1] stats     graphics  grDevices utils     datasets  methods   base     
    ## 
    ## other attached packages:
    ##  [1] kableExtra_1.1.0 knitr_1.28       forcats_0.5.0    stringr_1.4.0   
    ##  [5] dplyr_1.0.0      purrr_0.3.4      readr_1.3.1      tidyr_1.1.0     
    ##  [9] tibble_3.0.1     ggplot2_3.3.1    tidyverse_1.3.0 
    ## 
    ## loaded via a namespace (and not attached):
    ##  [1] tidyselect_1.1.0  xfun_0.13         haven_2.2.0       lattice_0.20-41  
    ##  [5] colorspace_1.4-1  vctrs_0.3.0       generics_0.0.2    viridisLite_0.3.0
    ##  [9] htmltools_0.4.0   yaml_2.2.1        rlang_0.4.6       pillar_1.4.4     
    ## [13] glue_1.4.1        withr_2.2.0       DBI_1.1.0         dbplyr_1.4.3     
    ## [17] modelr_0.1.7      readxl_1.3.1      lifecycle_0.2.0   munsell_0.5.0    
    ## [21] gtable_0.3.0      cellranger_1.1.0  rvest_0.3.5       evaluate_0.14    
    ## [25] fansi_0.4.1       broom_0.5.6       Rcpp_1.0.4.6      scales_1.1.1     
    ## [29] backports_1.1.7   webshot_0.5.2     jsonlite_1.6.1    fs_1.4.1         
    ## [33] hms_0.5.3         digest_0.6.25     stringi_1.4.6     grid_3.6.3       
    ## [37] cli_2.0.2         tools_3.6.3       magrittr_1.5      crayon_1.3.4     
    ## [41] pkgconfig_2.0.3   ellipsis_0.3.1    xml2_1.3.2        reprex_0.3.0     
    ## [45] lubridate_1.7.8   assertthat_0.2.1  rmarkdown_2.1     httr_1.4.1       
    ## [49] rstudioapi_0.11   R6_2.4.1          nlme_3.1-147      compiler_3.6.3
