/gpfs/gsfs10/users/HiTIF/data/nci-hitif/framework-nucleus-segmentation/inference
[general]
cropsize = 256
padding = 50
threshold = 10

MRCNN take from: /data/HiTIF/progs/miniconda/miniconda3/envs/hitif/lib/python3.7/site-packages/mask_rcnn-2.1-py3.7.egg/mrcnn/model.py
Loading weights from  ./mrcnn_pretrained.h5
(1078, 1278, 3)
bounds:
upper: 0
lower: 256
left : 0
right: 256
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  156.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   52.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 2.424990177154541
(256, 256, 12)
Sum = % 23035
Sum= 23035
result:
(1078, 1278)
bounds:
upper: 0
lower: 256
left : 206
right: 462
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  172.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   68.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5586996078491211
(256, 256, 12)
Sum = % 23157
Sum= 23157
result:
(1078, 1278)
bounds:
upper: 0
lower: 256
left : 412
right: 668
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5585861206054688
(256, 256, 15)
Sum = % 23361
Sum= 23361
result:
(1078, 1278)
bounds:
upper: 0
lower: 256
left : 618
right: 874
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  156.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   52.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5620503425598145
(256, 256, 13)
Sum = % 20380
Sum= 20380
result:
(1078, 1278)
bounds:
upper: 0
lower: 256
left : 824
right: 1080
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5635137557983398
(256, 256, 12)
Sum = % 23500
Sum= 23500
result:
(1078, 1278)
bounds:
upper: 0
lower: 256
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5802614688873291
(256, 256, 12)
Sum = % 25425
Sum= 25425
result:
(1078, 1278)
bounds:
upper: 0
lower: 256
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.6152081489562988
(256, 256, 12)
Sum = % 25425
Sum= 25425
result:
(1078, 1278)
bounds:
upper: 206
lower: 462
left : 0
right: 256
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  205.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  101.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5932798385620117
(256, 256, 13)
Sum = % 21537
Sum= 21537
result:
(1078, 1278)
bounds:
upper: 206
lower: 462
left : 206
right: 462
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  230.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  126.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.6063170433044434
(256, 256, 13)
Sum = % 26847
Sum= 26847
result:
(1078, 1278)
bounds:
upper: 206
lower: 462
left : 412
right: 668
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5602359771728516
(256, 256, 14)
Sum = % 23646
Sum= 23646
result:
(1078, 1278)
bounds:
upper: 206
lower: 462
left : 618
right: 874
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5800778865814209
(256, 256, 11)
Sum = % 22568
Sum= 22568
result:
(1078, 1278)
bounds:
upper: 206
lower: 462
left : 824
right: 1080
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5605318546295166
(256, 256, 15)
Sum = % 22687
Sum= 22687
result:
(1078, 1278)
bounds:
upper: 206
lower: 462
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  205.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  101.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5551154613494873
(256, 256, 13)
Sum = % 23810
Sum= 23810
result:
(1078, 1278)
bounds:
upper: 206
lower: 462
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  205.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  101.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.573627233505249
(256, 256, 13)
Sum = % 23810
Sum= 23810
result:
(1078, 1278)
bounds:
upper: 412
lower: 668
left : 0
right: 256
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  205.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  101.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.607764720916748
(256, 256, 13)
Sum = % 24234
Sum= 24234
result:
(1078, 1278)
bounds:
upper: 412
lower: 668
left : 206
right: 462
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  255.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  151.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.566464900970459
(256, 256, 16)
Sum = % 25799
Sum= 25799
result:
(1078, 1278)
bounds:
upper: 412
lower: 668
left : 412
right: 668
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5533580780029297
(256, 256, 13)
Sum = % 23457
Sum= 23457
result:
(1078, 1278)
bounds:
upper: 412
lower: 668
left : 618
right: 874
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  164.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   60.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5556039810180664
(256, 256, 14)
Sum = % 23741
Sum= 23741
result:
(1078, 1278)
bounds:
upper: 412
lower: 668
left : 824
right: 1080
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  197.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   93.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5521259307861328
(256, 256, 14)
Sum = % 25931
Sum= 25931
result:
(1078, 1278)
bounds:
upper: 412
lower: 668
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  205.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  101.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5567433834075928
(256, 256, 13)
Sum = % 21039
Sum= 21039
result:
(1078, 1278)
bounds:
upper: 412
lower: 668
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  205.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  101.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5551531314849854
(256, 256, 13)
Sum = % 21039
Sum= 21039
result:
(1078, 1278)
bounds:
upper: 618
lower: 874
left : 0
right: 256
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5665552616119385
(256, 256, 17)
Sum = % 28184
Sum= 28184
result:
(1078, 1278)
bounds:
upper: 618
lower: 874
left : 206
right: 462
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  197.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   93.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.562016487121582
(256, 256, 16)
Sum = % 26481
Sum= 26481
result:
(1078, 1278)
bounds:
upper: 618
lower: 874
left : 412
right: 668
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5620348453521729
(256, 256, 17)
Sum = % 27341
Sum= 27341
result:
(1078, 1278)
bounds:
upper: 618
lower: 874
left : 618
right: 874
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5515480041503906
(256, 256, 15)
Sum = % 24122
Sum= 24122
result:
(1078, 1278)
bounds:
upper: 618
lower: 874
left : 824
right: 1080
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  213.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  109.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5605072975158691
(256, 256, 16)
Sum = % 24346
Sum= 24346
result:
(1078, 1278)
bounds:
upper: 618
lower: 874
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  213.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  109.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5621309280395508
(256, 256, 14)
Sum = % 25811
Sum= 25811
result:
(1078, 1278)
bounds:
upper: 618
lower: 874
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  213.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  109.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5608270168304443
(256, 256, 14)
Sum = % 25811
Sum= 25811
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 0
right: 256
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  213.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  109.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5527043342590332
(256, 256, 13)
Sum = % 25566
Sum= 25566
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 206
right: 462
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.6260204315185547
(256, 256, 17)
Sum = % 26220
Sum= 26220
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 412
right: 668
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  197.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   93.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5597615242004395
(256, 256, 17)
Sum = % 30919
Sum= 30919
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 618
right: 874
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  197.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   93.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5544466972351074
(256, 256, 17)
Sum = % 30310
Sum= 30310
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 824
right: 1080
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  213.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  109.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5580072402954102
(256, 256, 15)
Sum = % 27704
Sum= 27704
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  189.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   85.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5631928443908691
(256, 256, 15)
Sum = % 22157
Sum= 22157
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  189.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   85.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.564337968826294
(256, 256, 15)
Sum = % 22157
Sum= 22157
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 0
right: 256
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  213.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  109.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5523841381072998
(256, 256, 13)
Sum = % 25566
Sum= 25566
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 206
right: 462
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  180.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   76.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5523092746734619
(256, 256, 17)
Sum = % 26220
Sum= 26220
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 412
right: 668
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  197.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   93.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5629844665527344
(256, 256, 17)
Sum = % 30919
Sum= 30919
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 618
right: 874
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  197.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   93.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5621013641357422
(256, 256, 17)
Sum = % 30310
Sum= 30310
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 824
right: 1080
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  213.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:  109.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5540285110473633
(256, 256, 15)
Sum = % 27704
Sum= 27704
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  189.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   85.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5630645751953125
(256, 256, 15)
Sum = % 22157
Sum= 22157
result:
(1078, 1278)
bounds:
upper: 822
lower: 1078
left : 1022
right: 1278
Processing 1 images
image                    shape: (256, 256, 3)         min:    0.00000  max:  189.00000  uint8
molded_images            shape: (1, 256, 256, 3)      min: -123.70000  max:   85.10000  float64
image_metas              shape: (1, 14)               min:    0.00000  max:  256.00000  int64
anchors                  shape: (1, 16368, 4)         min:   -0.35494  max:    1.10396  float32
Inference took 0.5816760063171387
(256, 256, 15)
Sum = % 22157
Sum= 22157
result:
(1078, 1278)
Connectivity matrix built
(604, 604)
222
(604,)
<class 'numpy.ndarray'>
applied lookup
(1078, 1278, 43)
Timer unit: 1e-06 s

Total time: 78.0627 s
File: ../src/mrcnn_infer_profile.py
Function: mrcnn_infer at line 10

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    10                                           def mrcnn_infer(img, mrcnn_model_path, config_file_path):
    11                                               # Config File Parser
    12         1        323.0    323.0      0.0      config = configparser.ConfigParser()
    13         1        461.0    461.0      0.0      config.read(config_file_path)
    14         1        128.0    128.0      0.0      param = {s: dict(config.items(s)) for s in config.sections()}['general']
    15         4          5.0      1.2      0.0      for key in param:
    16         3          6.0      2.0      0.0          param[key] = int(param[key])
    17         1          1.0      1.0      0.0      cropsize = param['cropsize']
    18         1          1.0      1.0      0.0      padding = param['padding']
    19         1          1.0      1.0      0.0      threshold = param['threshold']
    20                                           
    21         1   20209537.0 20209537.0     25.9      model = generate_inference_model(mrcnn_model_path, cropsize)
    22         1       1292.0   1292.0      0.0      mask = np.zeros(img.shape)
    23                                           
    24         2         12.0      6.0      0.0      for i in range(len(img)):
    25         1       4409.0   4409.0      0.0          imarray = np.array(img[i]).astype('uint16')
    26         1       3183.0   3183.0      0.0          image = skimage.color.gray2rgb(imarray)
    27         1      29185.0  29185.0      0.0          image = map_uint16_to_uint8(image)
    28                                           
    29         1   27318279.0 27318279.0     35.0          stitched_inference_stack, num_times_visited = stitched_inference(image, cropsize, model, padding=padding)
    30                                           
    31         1        379.0    379.0      0.0          masks = CleanMask(stitched_inference_stack, threshold, )
    32         1   30489755.0 30489755.0     39.1          masks.merge_cells()
    33                                           
    34         1        881.0    881.0      0.0          my_mask = masks.getMasks().astype("int16")
    35         1       4905.0   4905.0      0.0          mask[i, :, :] = my_mask
    36         1          1.0      1.0      0.0      return mask

